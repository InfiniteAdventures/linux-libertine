%
% Paket fuer den Font "libertine" (XeTeX)
%
% (c) Michael Niedermair
%
% (License GPL)
%
% $Id$
%
% 0.1    erster Start
%
% -------------------------------------
% feature tags:
%
% smcp (Gemeine -> Kapitaelchen)
% c2sc (Versalien -> Kapitaelchen)
% liga (Standardligaturen, wie z.B. ff, fi, fl...)
% hlig (historische, heute nicht mehr verwendete Ligaturen: st und ct)
% dlig (nuetzliche aber nicht notwendige Ligaturen, wie z.B. Qu und tz)
% frac (Brueche: z.B. 1/2, wird durch ein Zeichen ersetzt)
% tnum (Tabellenziffern)
% pnum (proportionale Reihe)
% onum (Medi‰valziffern - Minuskelziffern)
% zero (automatische Ersetzung der normalen durch die gestrichene Null)
% salt (stilistischen Alternativen)
% ss01 (deutsche Variante der Majuskelumlaute -> betonte Vokale)
% ss02 (verwendet teilweise geschwungenere Varianten von Groﬂbuchstaben, z.Z. von K und R)
% ss03 (Eszetts in SS/ss verwandeln)
% fina (besondere Zeichen fuer's Wortende)
% sinf (Tiefgestellte)
% sups (Hochgestellte)
% aalt (alle Alternativen anzeigen)
%
% -------------------------------------
\ProvidesPackage{libertinexe}[%
   2008/07/27 v0.1
   Font libertine - XeTeX (License GPL)
   Michael Niedermair]
%
\RequirePackage{ifxetex,keyval,calc,ifthen}
%
\ifxetex
   \def\libertine@debug{false}%       debug
   \def\libertine@amsmath{true}%      use amsmath
   \def\libertine@lucida{false}%      use lucida font
   \def\libertine@rawfeature{+onum;+liga}%      use otf features
   \def\libertine@script{}%           otf scripts
   \def\libertine@language{}%         otf language
   %
   \define@key{libertine}{debug}[true]{\def\libertine@debug{#1}}
   \define@key{libertine}{noamsmath}[false]{\def\libertine@amsmath{#1}}
   \define@key{libertine}{lucida}[true]{\def\libertine@lucida{#1}}
   \define@key{libertine}{rawfeature}[+onum;+hlig]{\def\libertine@rawfeature{#1}}
   \define@key{libertine}{script}[]{\def\libertine@script{#1}}
   \define@key{libertine}{language}[]{\def\libertine@language{#1}}
   %
   \def\ProcessOptionsWithKV#1{%
      \let\@tempc\relax
      \let\libertine@tempa\@empty
      \@for\CurrentOption:=\@classoptionslist\do{%
        \@ifundefined{KV@#1@\CurrentOption}%
        {}%
        {%
          \edef\libertine@tempa{\libertine@tempa,\CurrentOption,}%
          \@expandtwoargs\@removeelement\CurrentOption
            \@unusedoptionlist\@unusedoptionlist
        }%
      }%
      \edef\libertine@tempa{%
        \noexpand\setkeys{#1}{%
          \libertine@tempa\@ptionlist{\@currname.\@currext}%
        }%
      }%
      \libertine@tempa
      \let\CurrentOption\@empty
    }
   \ProcessOptionsWithKV{libertine}
   \AtEndOfPackage{%
     \let\@unprocessedoptions\relax
   }
   % -------------------------------------------------------

   % debug
   \ifthenelse{\equal{\libertine@debug}{true}}{
     \typeout{------ libertine: DEBUG ---------------------------}
     \typeout{debug          = \libertine@debug}
     \typeout{amsmath        = \libertine@amsmath}
     \typeout{lucida         = \libertine@lucida}
     \typeout{rawfeature     = \libertine@rawfeature}
     \typeout{script         = \libertine@script}
     \typeout{language       = \libertine@language}
     \typeout{---------- DEBUG ----------------------------------}
   }{}%

   % amsmath
   \ifthenelse{\equal{\libertine@amsmath}{true}}{
      \RequirePackage{amsmath}
   }{}%
   % lucida
   \ifthenelse{\equal{\libertine@lucida}{true}}{
      \RequirePackage[expert]{lucidabr}
   }{}%

   \RequirePackage{xunicode}
   \RequirePackage{fontspec}
   \RequirePackage{xltxtra}
   \setromanfont[Mapping=tex-text%
      ,RawFeature=\libertine@rawfeature%
      ,Language=\libertine@language%
      ,Script=\libertine@script%
      ]{Linux Libertine O}
   \newfontfamily\libertine[RawFeature=\libertine@rawfeature%
      ,Language=\libertine@language%
      ,Script=\libertine@script%
      ]{Linux Libertine O}

   % -------------------------------------------------------
\else
    \PackageWarning{libertinexe}{*** libertinexe.sty works only with xetex! ***^^J}
\fi
%
\endinput

